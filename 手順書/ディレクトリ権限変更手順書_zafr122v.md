# ディレクトリ権限変更手順書_zafr122v

-----------------------------------------------------------------------------------
## 作業要件
-----------------------------------------------------------------------------------
|#|項目|内容|
|:--|:--|:--|
|1|対象システム|赤ペン|
|2|対象ホスト|zafr122v|
|3|作業予定日|2023/00/00|

-----------------------------------------------------------------------------------
## 1. 事前作業
-----------------------------------------------------------------------------------
1. 作業開始連絡  
    関係者に作業開始の連絡を行う

2. Tera Termにログインする

3. root権限へ昇格する
    ```
    $ su -
    ```

4. ログイン先のサーバ名を確認する
   ```
   # uname -n
   ```

5. root権限であることを確認する
   ```
   # id
   ```

-----------------------------------------------------------------------------------
## 2. 権限変更①
-----------------------------------------------------------------------------------
1. 作業対象ディレクトリがあることを確認する
   ```
   # ls -ld /data/s01/apache/fnssso
   ```

2. 不要ディレクトリをBKに移動する
   ```
   # mv /data/s01/apache/fnssso/aclmgr bk/
   # mv /data/s01/apache/fnssso/BK bk/
   # mv /data/s01/apache/fnssso/_ssl_acldir_20201203_miss bk/
   ```

3. ディレクトリが移動したことを確認する
   ```
   # ls -l /data/s01/apache/fnssso
   # ls -l /data/s01/apache/fnssso/bk
   ```

4. 対象ディレクトリの所有者・所有グループを設定する
   ```
   # chown -R root:apl /data/s01/apache/fnssso
   ```

5. 対象ディレクトリの権限を変更する
   ```
   # find /data/s01/apache/fnssso -type d -exec chmod 775 {}
   ```

6. ディレクトリが想定通りの設定になっていることを確認する
   ```
   # ls -ld
   ```

7. 対象ディレクトリ内のファイル権限を変更する
   ```
   # find /data/s01/apache/fnssso -type f -exec chmod 664 {}
   ```

8. ファイルが想定通りの設定になっていることを確認する
   ```
   # ls -l
   ```

-----------------------------------------------------------------------------------
## 3. 権限変更②
-----------------------------------------------------------------------------------
1. 作業対象ディレクトリがあることを確認する
   ```
   # ls -ld /data/s01/apache/ssl_htdocs/health
   ```

2. 対象ディレクトリの所有者・所有グループを設定する
   ```
   # chown -R root:apl /data/s01/apache/ssl_htdocs/health
   ```

3. 対象ディレクトリの権限を変更する
   ```
   # find /data/s01/apache/ssl_htdocs/health -type d -exec chmod 775 {}
   ```

4. ディレクトリが想定通りの設定になっていることを確認する
   ```
   # ls -ld
   ```

5. 対象ディレクトリ内のファイル権限を変更する
   ```
   # find /data/s01/apache/ssl_htdocs/health -type f -exec chmod 664 {}
   ```

6. ファイルが想定通りの設定になっていることを確認する
   ```
   # ls -l
   ```

-----------------------------------------------------------------------------------
## 4. 権限変更③
-----------------------------------------------------------------------------------
1. 作業対象ディレクトリがあることを確認する
   ```
   # ls -ld /data/s02/apache/fnssso
   ```

2. 不要ディレクトリをbkに移動する
   ```
   # mv /data/s02/apache/fnssso/aclmgr bk/
   # mv /data/s02/apache/fnssso/_ssl_acldir_20201203_miss bk/
   ```

3. ディレクトリが移動したことを確認する
   ```
   # ls -l /data/s02/apache/fnssso
   # ls -l /data/s02/apache/fnssso/bk
   ```

4. 対象ディレクトリの所有者・所有グループを設定する
   ```
   # chown -R root:apl /data/s02/apache/fnssso
   ```

5. 対象ディレクトリの権限を変更する
   ```
   # find /data/s02/apache/fnssso -type d -exec chmod 775 {}
   ```

6. ディレクトリが想定通りの設定になっていることを確認する
   ```
   # ls -ld
   ```

7. 対象ディレクトリ内のファイル権限を変更する
   ```
   # find /data/s02/apache/fnssso -type f -exec chmod 664 {}
   ```

8. ファイルが想定通りの設定になっていることを確認する
   ```
   # ls -l
   ```

-----------------------------------------------------------------------------------
## 5. 権限変更④
-----------------------------------------------------------------------------------
1. 作業対象ディレクトリがあることを確認する
   ```
   # ls -ld /data/s02/apache/ssl_htdocs/health
   ```

2. 対象ディレクトリの所有者・所有グループを設定する
   ```
   # chown -R root:apl /data/s02/apache/ssl_htdocs/health
   ```

3. 対象ディレクトリの権限を変更する
   ```
   # find /data/s02/apache/ssl_htdocs/health -type d -exec chmod 775 {}
   ```

4. ディレクトリが想定通りの設定になっていることを確認する
   ```
   # ls -ld
   ```

5. 対象ディレクトリ内のファイル権限を変更する
   ```
   # find /data/s02/apache/ssl_htdocs/health -type f -exec chmod 664 {}
   ```

6. ファイルが想定通りの設定になっていることを確認する
   ```
   # ls -l
   ```

-----------------------------------------------------------------------------------
## 6. 権限変更⑤
-----------------------------------------------------------------------------------
1. 作業対象ディレクトリがあることを確認する
   ```
   # ls -ld /data/s11/apache/fnssso
   ```

2. 不要ディレクトリをbkに移動する
   ```
   # mv /data/s11/apache/fnssso/aclmgr bk/
   # mv /data/s11/apache/fnssso/BK bk/
   # mv /data/s11/apache/fnssso/_ssl_acldir_20201203_miss bk/
   ```

3. ディレクトリが移動したことを確認する
   ```
   # ls -l /data/s11/apache/fnssso
   # ls -l /data/s11/apache/fnssso/bk
   ```

4. 対象ディレクトリの所有者・所有グループを設定する
   ```
   # chown -R root:apl /data/s11/apache/fnssso
   ```

5. 対象ディレクトリの権限を変更する
   ```
   # find /data/s11/apache/fnssso -type d -exec chmod 775 {}
   ```

6. ディレクトリが想定通りの設定になっていることを確認する
   ```
   # ls -ld
   ```

7. 対象ディレクトリ内のファイル権限を変更する
   ```
   # find /data/s11/apache/fnssso -type f -exec chmod 664 {}
   ```

8. ファイルが想定通りの設定になっていることを確認する
   ```
   # ls -l
   ```

-----------------------------------------------------------------------------------
## 7. 権限変更⑥
-----------------------------------------------------------------------------------
1. 作業対象ディレクトリがあることを確認する
   ```
   # ls -ld /data/s11/apache/ssl_htdocs/health
   ```

2. 対象ディレクトリの所有者・所有グループを設定する
   ```
   # chown -R root:apl /data/s11/apache/ssl_htdocs/health
   ```

3. 対象ディレクトリの権限を変更する
   ```
   # find /data/s11/apache/ssl_htdocs/health -type d -exec chmod 775 {}
   ```

4. ディレクトリが想定通りの設定になっていることを確認する
   ```
   # ls -ld
   ```

5. 対象ディレクトリ内のファイル権限を変更する
   ```
   # find /data/s11/apache/ssl_htdocs/health -type f -exec chmod 664 {}
   ```

6. ファイルが想定通りの設定になっていることを確認する
   ```
   # ls -l
   ```

-----------------------------------------------------------------------------------
## 8. 事後作業
-----------------------------------------------------------------------------------
1. Tera Termからログアウトする
   ```
   # exit
   $ exit
   ```

2. 作業完了連絡
    依頼者に変更完了の連絡を行う

3. 作業エビデンス格納
    作業エビデンスをCAB資料格納先に保存する